-----------------------------------------------------------------------
 PSCF - Polymer Self-Consistent Field Theory
 Copyright (2007) David C. Morse
 email: morse@cems.umn.edu

 PSCF is a Fortran 90 program for numerically solving the polymer 
 self-consistent field theory for periodic microstructures formed 
 by incompressible melts or mixtures of linear block copolymers, 
 linear homopolymers, and small molecule solvents. 

 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation. A copy of this license is included in
 the LICENSE file in the top-level PSCF directory. 

-----------------------------------------------------------------------
These are instructions for compiling the program uisng the simple
Makefile that is provided in the build directory. Is it also 
possible to compile the program using cmake, as described in the
web user manual, or in the file doc/user-man/install.rst.

1. Install the open source LAPACK linear algebra library and the 
FFTW fast fourier transform library. 

2. Change directory (cd) to the build directory within the repository
directory tree, and copy the file Makefile_r to Makefile, by entering

>  cp Makefile_r Makefile

Explanation: The file Makefile_r is a default version of the Makefile
that is stored in the git repository. We ask users to make a copy 
named Makefile so they can modify file Makefile while keeping the file
Makefile_r unchanged.

3. Edit the file build/Makefile as needed. You will need to 
set the following variables to values appropriate to your operating
system and preferences:

     F90       = executable for Fortran 90 compiler
     FAST      = compiler options for high optimization
     NOPT      = compiler options for no optimization
     LAPACKLIB = path to LAPACK library
     FFTWLIB   = path to FFTW library
     FFT_FILE  = fft2_mod for FFTW v2 or fft3_mod for v3
     DEVEL     = empty string for stable version (see Makefile)
     BIN       = directory in which executable should be installed
     EXE       = name of executable file

By default $(BIN) is the root pscf/ directory and the executable 
file is named pscf. You may wish to change BIN to point to a directory
that is in your command search PATH.  Appropriate values of other
macros for some compilers and common locations for libraries are 
given in commented out lines within the Makefile.  The values of 
the macro variables SCF, SRC, and FORPEDO use relative paths that 
rely on the structure of the pscf repository directory tree, and 
so should not need to be reset.

The code was designed to allow use of either version 2 or version 3 
of the FFTW library, but the use of version 2 is deprecated: Use 
version 3 if at all possible. Because the interfaces of these 
versions of FFTW are different, two different fortran 90 modules, 
named fft2_mod and fft3_mod, are provided as wrappers for versions 2
and 3 of FFTW, respectively. The choice of which of these modules to 
compile and link is controlled by the value of the Makefile macro 
variable FFT_FILE, which should be set to 'fft3_mod' for version 3 
or 'fft2_mod' for version 2.

4. To compile, issue the command:

   > make pscf

from within the build directory.  This will fill the build 
directory with *.o and *.mod files and create an executable file
$(BIN)/$(EXE).
      
5. If desired, to remove all of the generated *.o, *.mod and files 
from the build directory, as well as any *~ files from src and its 
subdirectories, enter the command

   > make clean

5. NOTE: Before modifying any of the source files, read the 
discussion at the end of the src/SRC_FILES file regarding the use 
of a python preprocessor script (FORPEDO) to automatically generate 
some fortran files from preprocessor input files. 
